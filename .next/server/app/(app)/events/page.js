(()=>{var e={};e.id=468,e.ids=[468],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1001:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(7426),s(3703),s(5866),s(1506);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["(app)",{children:["events",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7426)),"/Users/iongonta/Downloads/taxflow-crm/app/(app)/events/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3703)),"/Users/iongonta/Downloads/taxflow-crm/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/iongonta/Downloads/taxflow-crm/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/iongonta/Downloads/taxflow-crm/app/(app)/events/page.tsx"],x="/(app)/events/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/events/page",pathname:"/events",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4258:(e,t,s)=>{Promise.resolve().then(s.bind(s,3974))},5029:(e,t,s)=>{Promise.resolve().then(s.bind(s,5999))},4315:(e,t,s)=>{Promise.resolve().then(s.bind(s,2899))},3324:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(326),r=s(7577),i=s(2945),n=s(5999),l=s(3855);let o={meeting:{label:"\xcent\xe2lnire",icon:"\uD83E\uDD1D",cls:"bg-blue-50 text-blue-700"},call:{label:"Apel",icon:"\uD83D\uDCDE",cls:"bg-green-50 text-green-700"},deadline:{label:"Deadline",icon:"⏰",cls:"bg-red-50 text-red-600"}},c=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],d=["L","M","M","J","V","S","D"];function x(){let[e,t]=(0,r.useState)([]),[s,x]=(0,r.useState)([]),[m,p]=(0,r.useState)(!1),[h,u]=(0,r.useState)({y:new Date().getFullYear(),m:new Date().getMonth()}),[g,f]=(0,r.useState)({title:"",type:"meeting",lead_id:"",starts_at:"",location:"",note:""});async function b(){let e=(0,i.e)(),{data:s}=await e.from("events").select("*, lead:lead_id(name)").order("starts_at"),{data:a}=await e.from("leads").select("id,name").order("name");t(s||[]),x(a||[])}async function v(e){e.preventDefault();let t=(0,i.e)(),{data:{user:s}}=await t.auth.getUser(),a={title:g.title,type:g.type,lead_id:g.lead_id||null,starts_at:g.starts_at,location:g.location||null,note:g.note||null,assigned_to:s?.id,created_by:s?.id},{error:r}=await t.from("events").insert(a);if(r){n.A.error(r.message);return}n.A.success("Eveniment adăugat"),p(!1),f({title:"",type:"meeting",lead_id:"",starts_at:"",location:"",note:""}),b()}let j=new Set(e.map(e=>new Date(e.starts_at).toDateString())),y=new Date,w=new Date(h.y,h.m,1).getDay(),N=new Date(h.y,h.m+1,0).getDate(),D=0===w?6:w-1,_=Array.from({length:D},(e,t)=>({d:0,i:t})).concat(Array.from({length:N},(e,t)=>({d:t+1,i:t+D}))),P=e.filter(e=>new Date(e.starts_at)>=y).slice(0,20),A=e=>({value:g[e],onChange:t=>f(s=>({...s,[e]:t.target.value})),className:"input"});return(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 h-14 flex items-center justify-between flex-shrink-0",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-base font-semibold",children:"Evenimente"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[P.length," viitoare"]})]}),(0,a.jsxs)("button",{onClick:()=>p(!0),className:"btn-primary",children:[a.jsx(l.Z,{size:15}),"Eveniment nou"]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_280px] gap-6 items-start",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-100 text-sm font-semibold text-gray-900",children:"Upcoming"}),P.map(e=>{let t=o[e.type]||o.meeting,s=new Date(e.starts_at);return(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0 flex items-center gap-4 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"text-center w-12 flex-shrink-0",children:[a.jsx("div",{className:"text-xs font-bold text-[#004437]",children:s.toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})}),a.jsx("div",{className:"text-[10px] text-gray-400",children:s.toLocaleDateString("ro-RO",{day:"2-digit",month:"short"})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e.lead?.name&&"\uD83D\uDC64 "+e.lead.name,e.location&&" \xb7 \uD83D\uDCCD"+e.location]})]}),(0,a.jsxs)("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${t.cls}`,children:[t.icon," ",t.label]})]},e.id)}),0===P.length&&a.jsx("div",{className:"text-center py-12 text-gray-400 text-sm",children:"Niciun eveniment viitor"})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("button",{onClick:()=>u(e=>{let t=e.m-1,s=e.y;return t<0&&(t=11,s--),{y:s,m:t}}),className:"w-7 h-7 border border-gray-200 rounded-lg flex items-center justify-center text-gray-500 hover:bg-gray-50",children:"‹"}),(0,a.jsxs)("span",{className:"text-sm font-semibold",children:[c[h.m]," ",h.y]}),a.jsx("button",{onClick:()=>u(e=>{let t=e.m+1,s=e.y;return t>11&&(t=0,s++),{y:s,m:t}}),className:"w-7 h-7 border border-gray-200 rounded-lg flex items-center justify-center text-gray-500 hover:bg-gray-50",children:"›"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-0.5",children:[d.map((e,t)=>a.jsx("div",{className:"text-center text-[10px] font-semibold text-gray-400 py-1",children:e},t)),_.map(({d:e,i:t})=>{if(!e)return a.jsx("div",{},t);let s=new Date(h.y,h.m,e),r=s.toDateString()===y.toDateString(),i=j.has(s.toDateString());return(0,a.jsxs)("div",{className:`relative text-center text-xs py-1.5 rounded-lg ${r?"bg-[#004437] text-white font-bold":"text-gray-700 hover:bg-gray-50"}`,children:[e,i&&a.jsx("span",{className:`absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full ${r?"bg-white/70":"bg-[#00c48c]"}`})]},t)})]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"font-semibold",children:"Eveniment nou"}),a.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:v,className:"px-6 py-4 space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Titlu *"}),a.jsx("input",{...A("title"),required:!0,placeholder:"\xcent\xe2lnire..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Tip"}),(0,a.jsxs)("select",{...A("type"),className:"input",children:[a.jsx("option",{value:"meeting",children:"\uD83E\uDD1D \xcent\xe2lnire"}),a.jsx("option",{value:"call",children:"\uD83D\uDCDE Apel"}),a.jsx("option",{value:"deadline",children:"⏰ Deadline"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Contact"}),(0,a.jsxs)("select",{...A("lead_id"),className:"input",children:[a.jsx("option",{value:"",children:"— niciun contact —"}),s.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Data și ora *"}),a.jsx("input",{...A("starts_at"),type:"datetime-local",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Locație"}),a.jsx("input",{...A("location"),placeholder:"Adresă sau link"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Notă"}),a.jsx("textarea",{...A("note"),className:"input resize-none",rows:2})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn-ghost",children:"Anulează"}),a.jsx("button",{type:"submit",className:"btn-primary",children:"Adaugă"})]})]})]})})]})}},2899:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var a=s(326),r=s(434),i=s(5047),n=s(2945),l=s(4319),o=s(3468),c=s(4061),d=s(1383),x=s(7358),m=s(9730),p=s(3685),h=s(763),u=s(1810),g=s(5999),f=s(1135);let b=[{label:"Dashboard",href:"/dashboard",icon:l.Z},{label:"Pipeline",href:"/pipeline",icon:o.Z},{label:"Contacte",href:"/contacts",icon:c.Z},{label:"Sarcini",href:"/tasks",icon:d.Z},{label:"Evenimente",href:"/events",icon:x.Z},{label:"WhatsApp",href:"/whatsapp",icon:m.Z},{label:"Import",href:"/import",icon:p.Z}],v=[{label:"Echipă & Utilizatori",href:"/admin/users",icon:h.Z}];function j({profile:e}){let t=(0,i.usePathname)(),s=(0,i.useRouter)(),r="admin"===e.role,l=e.full_name.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase();async function o(){let e=(0,n.e)();await e.auth.signOut(),g.A.success("La revedere!"),s.push("/auth/login"),s.refresh()}return r&&[...b,...v],(0,a.jsxs)("aside",{className:"w-[220px] min-w-[220px] bg-[#002e25] flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"px-5 py-5 border-b border-white/[0.08]",children:[a.jsx("div",{className:"font-serif text-xl text-white tracking-tight",children:"TaxFlow"}),a.jsx("div",{className:"text-[10px] text-white/40 uppercase tracking-[1.5px] mt-0.5",children:"CRM \xb7 Partner financiar"})]}),(0,a.jsxs)("nav",{className:"flex-1 px-2.5 py-4 overflow-y-auto scrollbar-thin space-y-0.5",children:[a.jsx("p",{className:"text-[10px] uppercase tracking-[1.2px] text-white/30 font-medium px-2.5 py-2",children:"Principal"}),b.slice(0,3).map(e=>a.jsx(y,{...e,active:t.startsWith(e.href)},e.href)),a.jsx("p",{className:"text-[10px] uppercase tracking-[1.2px] text-white/30 font-medium px-2.5 py-2 mt-2",children:"Activitate"}),b.slice(3,5).map(e=>a.jsx(y,{...e,active:t.startsWith(e.href)},e.href)),a.jsx("p",{className:"text-[10px] uppercase tracking-[1.2px] text-white/30 font-medium px-2.5 py-2 mt-2",children:"Instrumente"}),b.slice(5).map(e=>a.jsx(y,{...e,active:t.startsWith(e.href)},e.href)),r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("p",{className:"text-[10px] uppercase tracking-[1.2px] text-white/30 font-medium px-2.5 py-2 mt-2",children:"Administrare"}),v.map(e=>a.jsx(y,{...e,active:t.startsWith(e.href)},e.href))]})]}),(0,a.jsxs)("div",{className:"px-4 py-3.5 border-t border-white/[0.08] flex items-center gap-2.5",children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0",style:{background:e.avatar_color},children:l}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[13px] text-white font-medium truncate",children:e.full_name}),a.jsx("div",{className:"text-[11px] text-white/40 truncate",children:r?"⚡ Administrator":"Utilizator"})]}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("button",{onClick:o,className:"text-white/40 hover:text-white/80 transition-colors p-1",title:"Ieșire",children:a.jsx(u.Z,{size:15})})})]})]})}function y({href:e,label:t,icon:s,active:i}){return(0,a.jsxs)(r.default,{href:e,className:(0,f.Z)("flex items-center gap-2.5 px-2.5 py-2 rounded-lg text-[13.5px] transition-all",i?"bg-[#00c48c]/15 text-[#00c48c] font-medium":"text-white/60 hover:bg-white/[0.07] hover:text-white"),children:[a.jsx(s,{size:16,className:"flex-shrink-0"}),t]})}},2945:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var a=s(861);function r(){return(0,a.createBrowserClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7426:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var a=s(8570);let r=(0,a.createProxy)(String.raw`/Users/iongonta/Downloads/taxflow-crm/app/(app)/events/page.tsx`),{__esModule:i,$$typeof:n}=r;r.default;let l=(0,a.createProxy)(String.raw`/Users/iongonta/Downloads/taxflow-crm/app/(app)/events/page.tsx#default`)},3703:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(9510),r=s(8585),i=s(9692),n=s(8570);let l=(0,n.createProxy)(String.raw`/Users/iongonta/Downloads/taxflow-crm/components/layout/Sidebar.tsx`),{__esModule:o,$$typeof:c}=l;l.default;let d=(0,n.createProxy)(String.raw`/Users/iongonta/Downloads/taxflow-crm/components/layout/Sidebar.tsx#default`);async function x({children:e}){let t=(0,i.e)(),{data:{user:s}}=await t.auth.getUser();s||(0,r.redirect)("/auth/login");let{data:n}=await t.from("profiles").select("id, full_name, email, role, is_active, avatar_color").eq("id",s.id).single();return n?.is_active||(0,r.redirect)("/auth/login?error=account_disabled"),(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-50",children:[a.jsx(d,{profile:n}),a.jsx("main",{className:"flex-1 flex flex-col overflow-hidden",children:e})]})}},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var a=s(9510),r=s(1032);s(7272);let i={title:"TaxFlow CRM",description:"Partner \xeen structurare financiară"};function n({children:e}){return(0,a.jsxs)("html",{lang:"ro",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),a.jsx("link",{href:"https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&family=DM+Serif+Display:ital@0;1&display=swap",rel:"stylesheet"})]}),(0,a.jsxs)("body",{className:"bg-gray-50 text-gray-900 antialiased",children:[e,a.jsx(r.x7,{position:"bottom-right",richColors:!0})]})]})}},9692:(e,t,s)=>{"use strict";s.d(t,{e:()=>i});var a=s(7721),r=s(1615);function i(){let e=(0,r.cookies)();return(0,a.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:s,options:a})=>e.set(t,s,a))}catch{}}}})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,786,702,172,334,748],()=>s(1001));module.exports=a})();