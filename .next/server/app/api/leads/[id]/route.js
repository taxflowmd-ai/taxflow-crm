"use strict";(()=>{var e={};e.id=252,e.ids=[252],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1637:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>v,patchFetch:()=>P,requestAsyncStorage:()=>A,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>E});var r={};s.r(r),s.d(r,{DELETE:()=>g,PATCH:()=>x});var a=s(9303),n=s(8716),o=s(670),i=s(7070),u=s(7721),p=s(1615),d=s(7857);let l=()=>(0,d.eI)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});function c(){let e=(0,p.cookies)();return(0,u.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{getAll:()=>e.getAll(),setAll(){}}})}async function x(e,{params:t}){let{data:{user:s}}=await c().auth.getUser();if(!s)return i.NextResponse.json({error:"Neautentificat"},{status:401});let r=await e.json(),{data:a,error:n}=await l().from("leads").update(r).eq("id",t.id).select().single();return n?i.NextResponse.json({error:n.message},{status:500}):i.NextResponse.json({data:a})}async function g(e,{params:t}){let{data:{user:s}}=await c().auth.getUser();if(!s)return i.NextResponse.json({error:"Neautentificat"},{status:401});let{error:r}=await l().from("leads").delete().eq("id",t.id);return r?i.NextResponse.json({error:r.message},{status:500}):i.NextResponse.json({success:!0})}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/leads/[id]/route",pathname:"/api/leads/[id]",filename:"route",bundlePath:"app/api/leads/[id]/route"},resolvedPagePath:"/Users/iongonta/Downloads/taxflow-crm/app/api/leads/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:A,staticGenerationAsyncStorage:E,serverHooks:f}=m,v="/api/leads/[id]/route";function P(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:E})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,786,702,972],()=>s(1637));module.exports=r})();