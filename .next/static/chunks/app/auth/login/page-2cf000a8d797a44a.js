(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{2538:function(e,t,a){Promise.resolve().then(a.bind(a,2727))},2727:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var s=a(7437),r=a(2265),n=a(6463),i=a(6474),l=a(7776),c=a(7019),u=a(5733),o=a(3274);function d(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[a,d]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[m,f]=(0,r.useState)(!1),[p,j]=(0,r.useState)(!1);async function b(s){if(s.preventDefault(),!a||!x)return;j(!0);let r=(0,i.e)(),{error:n}=await r.auth.signInWithPassword({email:a,password:x});if(n){l.A.error(n.message.includes("Invalid login")?"Email sau parola incorecta":n.message),j(!1);return}let{data:{user:c}}=await r.auth.getUser();c&&await r.from("profiles").update({last_login_at:new Date().toISOString()}).eq("id",c.id);let u=t.get("redirect")||"/dashboard";e.push(u),e.refresh()}return(0,r.useEffect)(()=>{"account_disabled"===t.get("error")&&l.A.error("Contul tau a fost dezactivat. Contacteaza administratorul.")},[t]),(0,s.jsxs)("div",{className:"w-full max-w-sm",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"font-serif text-4xl text-white mb-1",children:"TaxFlow"}),(0,s.jsx)("p",{className:"text-xs text-white/40 uppercase tracking-[2px]",children:"CRM"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-8 pt-8 pb-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:"Buna ziua"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Intra in contul tau TaxFlow CRM"})]}),(0,s.jsxs)("form",{onSubmit:b,className:"px-8 pb-8 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"input",placeholder:"ion@taxflow.md",value:a,onChange:e=>d(e.target.value),required:!0,autoFocus:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Parola"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:m?"text":"password",className:"input pr-10",placeholder:"password",value:x,onChange:e=>h(e.target.value),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>f(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?(0,s.jsx)(c.Z,{size:16}):(0,s.jsx)(u.Z,{size:16})})]})]}),(0,s.jsxs)("button",{type:"submit",disabled:p,className:"w-full bg-[#004437] text-white py-2.5 rounded-lg text-sm font-semibold hover:bg-[#005a47] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-2",children:[p&&(0,s.jsx)(o.Z,{size:16,className:"animate-spin"}),p?"Se verifica...":"Intra in CRM"]})]})]}),(0,s.jsx)("p",{className:"text-center text-xs text-white/30 mt-6",children:"Nu ai cont? Solicita o invitatie administratorului."})]})}function x(){return(0,s.jsx)("div",{className:"min-h-screen bg-[#002e25] flex items-center justify-center p-4",children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"text-white",children:"Se incarca..."}),children:(0,s.jsx)(d,{})})})}},6474:function(e,t,a){"use strict";a.d(t,{e:function(){return n}});var s=a(6038),r=a(357);function n(){return(0,s.createBrowserClient)(r.env.NEXT_PUBLIC_SUPABASE_URL,r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},7019:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},5733:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3274:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6463:function(e,t,a){"use strict";var s=a(1169);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[46,776,971,23,744],function(){return e(e.s=2538)}),_N_E=e.O()}]);